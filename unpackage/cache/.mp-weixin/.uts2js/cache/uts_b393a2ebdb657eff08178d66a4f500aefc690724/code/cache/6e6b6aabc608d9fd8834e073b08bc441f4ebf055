{"code":"import { __awaiter } from \"tslib\";\nimport { defineComponent } from \"vue\";\nimport { wechatAuth, getStoredUserInfo } from '../../utils/services/wechat';\nexport default defineComponent({\n    data() {\n        return {\n            userInfo: null,\n            loading: true,\n        };\n    },\n    onLoad() {\n        this.initializeAuth();\n    },\n    methods: {\n        initializeAuth() {\n            return __awaiter(this, void 0, void 0, function* () {\n                try {\n                    this.loading = true;\n                    // 尝试获取已存储的用户信息\n                    const storedInfo = getStoredUserInfo();\n                    if (storedInfo) {\n                        uni.__f__('log', 'at pages/index/index.vue:47', 4);\n                        this.userInfo = storedInfo;\n                        this.loading = false;\n                        return Promise.resolve(null);\n                    }\n                    // 进行微信授权\n                    const userInfo = yield wechatAuth();\n                    uni.__f__('log', 'at pages/index/index.vue:55', 1);\n                    if (userInfo) {\n                        this.userInfo = userInfo;\n                    }\n                }\n                catch (error) {\n                    uni.showToast({\n                        title: '授权失败，请重试',\n                        icon: 'none',\n                    });\n                    uni.__f__('error', 'at pages/index/index.vue:64', '授权失败:', error);\n                }\n                finally {\n                    this.loading = false;\n                }\n            });\n        },\n        viewHistory() {\n            uni.navigateTo({\n                url: '/pages/index/historyRecords/historyRecords',\n            });\n        },\n        viewPdfReport() {\n            // 实现查看PDF报告的逻辑\n            uni.showToast({\n                title: '功能开发中',\n                icon: 'none',\n            });\n        },\n    },\n});\n//# sourceMappingURL=C:/Users/Msi/Desktop/wechatweb4/pages/index/index.vue?vue&type=script&lang.uts.js.map","references":["C:/Users/Msi/Desktop/wechatweb4/utils/services/wechat.js"],"uniExtApis":["uni.__f__","uni.showToast","uni.navigateTo"],"map":"{\"version\":3,\"file\":\"index.vue?vue&type=script&lang.uts.js\",\"sourceRoot\":\"\",\"sources\":[\"index.vue?vue&type=script&lang.uts\"],\"names\":[],\"mappings\":\";;AACA,OAAO,EAAE,UAAU,EAAE,iBAAiB,EAAE,MAAM,6BAA6B,CAAC;AAE5E,+BAAe;IACb,IAAI;QACF,OAAO;YACL,QAAQ,EAAE,IAAI;YACd,OAAO,EAAE,IAAI;SACd,CAAC;IACJ,CAAC;IACD,MAAM;QACJ,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IACD,OAAO,EAAE;QACD,cAAc;;gBAClB,IAAI;oBACF,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;oBACpB,eAAe;oBACf,MAAM,UAAU,GAAG,iBAAiB,EAAE,CAAC;oBACvC,IAAI,UAAU,EAAE;wBACd,GAAG,CAAC,KAAK,CAAC,KAAK,EAAC,6BAA6B,EAAC,CAAC,CAAC,CAAC;wBACjD,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC;wBAC3B,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;wBACrB,6BAAO;qBACR;oBAED,SAAS;oBACT,MAAM,QAAQ,GAAG,MAAM,UAAU,EAAE,CAAC;oBACpC,GAAG,CAAC,KAAK,CAAC,KAAK,EAAC,6BAA6B,EAAC,CAAC,CAAC,CAAC;oBACjD,IAAI,QAAQ,EAAE;wBACZ,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;qBAC1B;iBACF;gBAAC,OAAO,KAAK,EAAE;oBACd,GAAG,CAAC,SAAS,CAAC;wBACZ,KAAK,EAAE,UAAU;wBACjB,IAAI,EAAE,MAAM;qBACb,CAAC,CAAC;oBACH,GAAG,CAAC,KAAK,CAAC,OAAO,EAAC,6BAA6B,EAAC,OAAO,EAAE,KAAK,CAAC,CAAC;iBACjE;wBAAS;oBACR,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;iBACtB;YACH,CAAC;SAAA;QACD,WAAW;YACT,GAAG,CAAC,UAAU,CAAC;gBACb,GAAG,EAAE,4CAA4C;aAClD,CAAC,CAAC;QACL,CAAC;QACD,aAAa;YACX,eAAe;YACf,GAAG,CAAC,SAAS,CAAC;gBACZ,KAAK,EAAE,OAAO;gBACd,IAAI,EAAE,MAAM;aACb,CAAC,CAAC;QACL,CAAC;KACF;CACF,EAAC\"}"}
